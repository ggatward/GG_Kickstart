<%#
kind: snippet
name: GatwardIT-snippet_centos_repos
%>
echo "++++++++++++++++++++++++++ CentOS repo Snippet ++++++++++++++++++++++++++++++++"

<%# Disable fastestmirror plugin %>
sed -i 's/^enabled=1/enabled=0/g' /etc/yum/pluginconf.d/fastestmirror.conf

<%# Setup our local CentOS repos %>
rpm --import http://mirror.centos.org/centos-7/7/os/x86_64/RPM-GPG-KEY-CentOS-7

<%# Setup EPEL %>
rpm -i http://download.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm
rpm --import http://download.fedoraproject.org/pub/epel/RPM-GPG-KEY-EPEL-7


<%# Install packages that would normally be defined early in the kickstart.
This is because the base/updates repos are not reliably defined early on in the CentOS builds %>
echo ">>> Installing packages..."
yum -q -y install yum-plugin-security aide dhclient dos2unix mlocate policycoreutils-python screen vim wget chrony policycoreutils-restorecond bind-utils yum-utils
